<mat-form-field [appearance]="getAppearance()" [color]="matColor"  [style.width.ch]="getSize(value ? value.toString() : '')" [style.width]="styleWidth">
  <mat-label>{{label}}</mat-label>
  <mat-select
    [(ngModel)]="value"
    (ngModelChange)="emitValue()"
    [disabled]="disable || readonly"
    [required]="required"
    (opened)="emitOpened()"
    (closed)="emitClosed()"
    (selectionChange)="emitSelectionChange($event)">
    @if (noneLabel) {
      <mat-option [value]="noneLabelValue">{{noneLabel}}</mat-option>
    }
    @for (option of options; track option) {
      <mat-option [value]="option.value" [disabled]="option.disable">{{option.valueLabel}}</mat-option>
    }
    @if (customOptionLabel) {
      <mat-option [value]="customOptionLabel" (click)="onCustomOptionSelected.emit()"><p [style.color]="customOptionLabelColor">{{customOptionLabel}}</p></mat-option>
    }
  </mat-select>
  <mat-error>{{label}} can't be empty</mat-error>
</mat-form-field>
